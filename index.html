<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Playfra – Ukraine Control Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
}

body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

#map {
    width: 100%;
    height: 100%;
}

/* Top-right controls */
#topright-controls {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.control-button {
    background: #111;
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    user-select: none;
}

.control-button:hover {
    background: #222;
}

/* Overlays */
.overlay {
    position: absolute;
    top: 60px;
    right: 10px;
    width: 360px;
    max-height: 70vh;
    overflow-y: auto;
    background: #111;
    color: #eee;
    padding: 12px;
    border-radius: 6px;
    display: none;
    z-index: 1000;
    font-size: 14px;
    line-height: 1.45;
}

.overlay strong {
    color: #fff;
}

.overlay a {
    color: #4cb1ff;
    text-decoration: none;
}

.overlay a:hover {
    text-decoration: underline;
}

/* Legend */
#legend {
    margin-top: 10px;
}

.legend-title {
    font-weight: 600;
    margin-bottom: 6px;
}

.legend-item {
    margin-bottom: 10px;
}

.info-button {
    margin-top: 10px;
    background: #222;
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    cursor: pointer;
    display: inline-block;
}

.info-button:hover {
    background: #333;
}
</style>
</head>

<body>

<div id="map"></div>

<div id="topright-controls">
    <div class="control-button" id="info-toggle">Info</div>
    <div class="control-button" id="settings-toggle">Settings</div>
</div>

<!-- INFO OVERLAY -->
<div class="overlay" id="info-overlay">

<strong>Notes:</strong>
<ol style="margin:6px 0 0 18px; padding:0;">
    <li>
        The map is based on information from sources in the field coming from both
        sides of the conflict and on DeepStateMap. The objective of the map is to be
        as accurate as possible while following the criteria listed in the legend.
    </li>
    <li>
        The following map cannot and does not represent with full accuracy the real
        situation on the front line. At this point in time, this war is not possible
        to draw on a map and is infinitely more complicated than polygons and lines.
        Please do not use this map for any serious purposes other than educational and
        informational. Because of this, please take into much higher consideration
        the information published on my X and Telegram profiles.
    </li>
    <li>
        Usage of the data contained in the map without my permission is strictly not allowed.
    </li>
    <li>
        Everything shown in the map complies with imposed OPSEC and is not showing in
        any way restricted and/or classified data. Both sides of the conflict are
        knowledgeable of what's shown in the map and possess either the same or better
        information than what the map is showing.
    </li>
</ol>

<div style="margin-top:10px;">
<strong>Contacts:</strong>
<ul style="margin:6px 0 0 18px; padding:0;">
    <li>X: <a href="https://x.com/Playfra0" target="_blank">@Playfra0</a></li>
    <li>Telegram: <a href="https://t.me/Playfra" target="_blank">@Playfra</a></li>
    <li>Discord: @playfra</li>
</ul>
</div>

<div class="info-button" id="legend-toggle">Legend</div>

<div id="legend">

<div class="legend-item">
<div class="legend-title">Control</div>

<div style="margin:4px 0;">
<span style="display:inline-flex;align-items:center;gap:6px;">
<span style="width:16px;height:16px;background:#ca0000;"></span>
Red
</span>
— <strong>Consolidated Russian control:</strong>
Russian forces have a sustained presence and have established permanent,
manned positions. Parts of this area are not transferred into the gray zone
unless one or more gray zone conditions are respected.
</div>

<div style="margin:4px 0;">
<span style="display:inline-flex;align-items:center;gap:6px;">
<span style="width:16px;height:16px;background:#777;"></span>
Gray
</span>
— <strong>Unclear or contested control:</strong>
The area is a no man’s land, contested, or mixed with positions from both sides.
</div>

<div style="margin:4px 0;">
<span style="display:inline-flex;align-items:center;gap:6px;">
<span style="width:16px;height:16px;background:#377eb8;"></span>
Blue
</span>
— <strong>Consolidated Ukrainian control:</strong>
Ukrainian forces have a sustained presence and have established permanent,
manned positions.
</div>
</div>

<div class="legend-item">
<div class="legend-title">Fortifications</div>

<div style="margin:4px 0;">
<span style="display:inline-flex;align-items:center;gap:6px;">
<span style="width:16px;height:16px;background:#ffc300;"></span>
Yellow
</span>
— Ditches
</div>

<div style="margin:4px 0;">
<span style="display:inline-flex;align-items:center;gap:6px;">
<span style="width:16px;height:16px;background:#00ffff;"></span>
Blue
</span>
— Dragon's teeth, vehicle obstacles, block posts
</div>

<div style="margin:4px 0;">
<span style="display:inline-flex;align-items:center;gap:6px;">
<span style="width:16px;height:16px;background:#bcbcbc;"></span>
Gray
</span>
— Concertina wire and “MZP Putanka” trip wire
</div>

</div>
</div>
</div>

<!-- SETTINGS OVERLAY -->
<div class="overlay" id="settings-overlay">
<strong>Settings</strong>
<p>Additional settings will be added here.</p>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const map = L.map('map', { preferCanvas: true })
    .setView([48.6857, 35.828], 6);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

map.createPane('controlPane');
map.createPane('fortPane');

function addGeoJSON(url, name, options) {
    fetch(url)
        .then(r => r.json())
        .then(data => {
            L.geoJSON(data, options).addTo(map);
        });
}

addGeoJSON(
  'https://playframap.github.io/data/Ukraine.geojson',
  'Ukraine',
  {
    pane: 'controlPane',
    style: {
      color: '#4cb1ff',
      weight: 1.6,
      fillColor: '#377eb8',
      fillOpacity: 0.3
    }
  }
);

addGeoJSON(
  'https://playframap.github.io/data/Russia.geojson',
  'Russia',
  {
    pane: 'controlPane',
    style: {
      color: '#ff0000',
      weight: 1.6,
      fillColor: '#ca0000',
      fillOpacity: 0.3
    }
  }
);

addGeoJSON(
  'https://playframap.github.io/data/ditches.geojson',
  'Ditches',
  {
    pane: 'fortPane',
    style: { color: '#ffc300', weight: 1.5 }
  }
);

addGeoJSON(
  'https://playframap.github.io/data/teeth.geojson',
  'Teeth',
  {
    pane: 'fortPane',
    style: { color: '#00ffff', weight: 1.5 }
  }
);

addGeoJSON(
  'https://playframap.github.io/data/wire.geojson',
  'Wire',
  {
    pane: 'fortPane',
    style: { color: '#bcbcbc', weight: 1.5 }
  }
);

/* Toggles */
const info = document.getElementById('info-overlay');
const settings = document.getElementById('settings-overlay');
const legend = document.getElementById('legend');

document.getElementById('info-toggle').onclick = () => {
    info.style.display = info.style.display === 'block' ? 'none' : 'block';
    settings.style.display = 'none';
};

document.getElementById('settings-toggle').onclick = () => {
    settings.style.display = settings.style.display === 'block' ? 'none' : 'block';
    info.style.display = 'none';
};

document.getElementById('legend-toggle').onclick = () => {
    legend.style.display = legend.style.display === 'block' ? 'none' : 'block';
};
</script>

</body>
</html>
